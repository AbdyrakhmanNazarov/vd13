{% extends 'base.html' %}

{% load static %}

{% block content %}
<section class="car-form-section">
  <div class="container">
    <h1>Редактировать автомобиль</h1>

    {% if success %}
      <div class="success-message">Автомобиль успешно обновлен!</div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="form-group">
        <label>Владелец</label>
        <input type="text" name="owner" value="{{ car.owner }}">
      </div>

      <div class="form-group">
        <label>Марка</label>
        <input type="text" name="brand" value="{{ car.brand }}">
      </div>

      <div class="form-group">
        <label>Модель</label>
        <input type="text" name="model" value="{{ car.model }}">
      </div>

      <div class="form-group">
        <label>Год</label>
        <input type="number" name="year" value="{{ car.year }}">
      </div>

      <div class="form-group">
        <label>Тип двигателя</label>
        <select name="engine">
          {% for value, label in car.type_engine %}
            <option value="{{ value }}" {% if car.engine == value %}selected{% endif %}>{{ label }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label>Объем двигателя (л)</label>
        <input type="text" name="engine_capacity" value="{{ car.engine_capacity }}">
      </div>

      <div class="form-group">
        <label>Гос. номер</label>
        <input type="text" name="number_plate" value="{{ car.number_plate }}">
      </div>

      <div class="form-group">
        <label>Телефон</label>
        <input type="text" name="phone_number" value="{{ car.phone_number }}">
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" name="email" value="{{ car.email }}">
      </div>

      <div class="form-group">
        <label>Категория</label>
        <select name="group">
          {% for g in groups %}
            <option value="{{ g.id }}" {% if car.group.id == g.id %}selected{% endif %}>{{ g.name }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label>Аватар</label>
        <input type="file" name="avatar">
        {% if car.avatar %}
          <img src="{{ car.avatar.url }}" alt="Текущий аватар" width="100">
        {% endif %}
      </div>

      <div class="form-group">
        <label>Описание</label>
        <textarea name="description">{{ car.description }}</textarea>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Обновить</button>
        <a href="{% url 'car_delete' id=car.id %}" class="btn btn-danger" onclick="return confirm('Вы уверены, что хотите удалить этот автомобиль?');">Удалить</a>
        <a href="{% url 'main' %}" class="btn btn-secondary">Главное меню</a>
      </div>
    </form>
  </div>
</section>
{% endblock %}