{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="section clients-reviews">
  <div class="container">
    <div class="global">
      <a href="{% url 'main' %}" class="btn-back">⬅ Назад</a>
      <h1>Отзывы наших клиентов</h1>

      <!-- Форма оставления отзыва -->
      <form method="POST">
        {% csrf_token %}
        <input type="text" name="name" placeholder="Ваше имя" required />
        <input type="email" name="email" placeholder="Ваш Email" required />
        <textarea name="review" placeholder="Ваш отзыв" rows="4" required></textarea>

        <!-- Новый рейтинг -->
        <div class="rating">
          <input type="radio" name="rating" id="star5" value="5" />
          <label for="star5" title="5 звезд">★</label>

          <input type="radio" name="rating" id="star4" value="4" />
          <label for="star4" title="4 звезды">★</label>

          <input type="radio" name="rating" id="star3" value="3" />
          <label for="star3" title="3 звезды">★</label>

          <input type="radio" name="rating" id="star2" value="2" />
          <label for="star2" title="2 звезды">★</label>

          <input type="radio" name="rating" id="star1" value="1" required />
          <label for="star1" title="1 звезда">★</label>
        </div>

        <button type="submit">Отправить отзыв</button>
      </form>

      <!-- Карточки отзывов -->
      <div class="reviews-cards">
        {% for r in reviews %}
        <div class="review-card">
          <div class="review-header">
            <h3>{{ r.name }}</h3>
            <div class="review-rating">
              {% for i in "12345" %}
                {% if forloop.counter <= r.rating %}
                  <span class="star active">★</span>
                {% else %}
                  <span class="star">☆</span>
                {% endif %}
              {% endfor %}
            </div>
          </div>
          <p>{{ r.review }}</p>
          <small>{{ r.created_at|date:'d.m.Y H:i' }}</small>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
